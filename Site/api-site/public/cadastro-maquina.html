<!DOCTYPE html>
<html lang="pt">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Boxicons -->
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp" rel="stylesheet" rel='stylesheet'>
	<!-- My CSS -->
	<link rel="stylesheet" href="./css/cadastros-logado.css">
	<link rel="stylesheet" href="https://fonts.sandbox.google.com/css2?family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@48,400,0,0"/>
	<script type="text/javascript" src="https://www.chartjs.org/dist/2.8.0/Chart.min.js"></script>
	<link href='https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css' rel='stylesheet'>
	<title>DataCat</title>
</head>

<body
	onload='plotarGrafico("graficoMemoria"),plotarGrafico("graficoCpu"),plotarGrafico("graficoDisco"),plotarGrafico("graficoTemp")'>


	<!-- SIDEBAR -->
	<section id="sidebar">
		<a href="#" class="brand">
			<img src="./assets/imagens/logo/logo-black.png"
				alt="">
			<span class="text">DataCat</span>
		</a>
		<ul class="side-menu top">
			<li>
				<a href="#">
					<span class="material-icons-sharp">
						grid_view
					</span>
					<span class="text">Dashboard</span>
				</a>
			</li>
			<li  class="active">
				<a href="#">
					<span class="material-icons-sharp">
						perm_identity
					</span>
					<span class="text">Cadastrar usuário</span>
				</a>
			</li>
			<li>
				<a href="#">
					<span class="material-icons-sharp">
						notifications
					</span>
					<span class="text">Notifições</span>
				</a>
			</li>
			<li>
				<a href="#">
					<span class="material-icons-sharp">add_to_queue</span>
					<span>Cadastrar máquina</span>
				</a>
			</li>
			<li>
				<a href="#">
					<span class="material-icons-sharp">
						groups
					</span>
					<span class="text">Team</span>
				</a>
			</li>
		</ul>
		<ul class="side-menu">
			<li>
				<a href="#">
					<span class="material-icons-sharp">settings</span>
					<span class="text">Settings</span>
				</a>
			</li>
			<li>
				<a href="#" class="logout">
					<span class="material-icons-sharp">logout</span>
					<span class="text">Logout</span>
				</a>
			</li>
		</ul>
	</section>
	<!-- SIDEBAR -->



	<!-- CONTENT -->
	<section id="content">
		<!-- NAVBAR -->
		<nav>
			<i class='bx bx-menu'></i>
			<!-- <span class="material-icons-sharp"> -->


			<a href="#" class="nav-link">Categorias</a>
			<form action="#">
				<div class="form-input">
					<input type="search" placeholder="Search...">
					<button type="submit" class="search-btn"><i class='bx bx-search'></i></button>

				</div>
			</form>
			<input type="checkbox" id="switch-mode" hidden>
			<label for="switch-mode" class="switch-mode"></label>
			<a href="#" class="notification">
				<span class="material-icons-sharp">
					notifications
				</span>
				<span class="num">8</span>
			</a>
			<a href="#" class="profile">
				<img src="./assets/fotos/leticia.jfif">
			</a>
		</nav>
		<!-- NAVBAR -->

		<!-- MAIN -->
		<main>
			<div class="head-title">
				<div class="left">
					<h1>Cadastro Máquina / Servidor</h1>
					<ul class="breadcrumb">
						<li>
							<a href="#">Dashboard</a>
						</li>
						<li><i class='bx bx-chevron-right'></i></li>
						<li>
							<a class="active" href="#">Cadastro Máquina / Servidor</a>
						</li>
					</ul>
				</div>
				<a href="#" class="btn-download">
					<i class='bx bxs-cloud-download'></i>
					<span class="text">Download PDF</span>
				</a>
			</div>


			<div>
				<div class="box-subscribe-machine">
					<div class="subscribe-left">
						<div class="title-subscribe">
							<h3>Faça o cadastro das suas máquinas e servidores e receba seus dados dinâmicamente onde estiver</h3>
							<i>Cadastre agora</i>
						</div>
						<img src="./assets/imagens/atm_single_png.png" alt="">
					</div>
					
					<div class = "subscribe-right">
						<form action="" id="form_cadastroMaquina" method="post" onsubmit="return cadastrarMaquina()">
							<label for="">Identificador Máquina</label>
							<input name="identmaquina" id="identmaquina" type="text" required maxlength="15">
							<label for="">Grupo</label>
							<input name="grupo" id="grupo" type="text" required maxlength="15">
							<label for="">Componente</label>
							<select name="componente" id="componente"  required maxlength="3">
								<option value="ram">RAM</option>
								<option value="cpu">CPU</option>
								<option value="disco">DISCO</option>
							</select>
							<label for="">Capacidade</label>
							<input name="capacidade" id="capacidade" type="number" required maxlength="45">
							<label for="">Limite Alerta</label>
							<select name="alerta" id="alerta" type="" required maxlength="15">
								<option value="50">50%</option>
								<option value="60">60%</option>
								<option value="70">70%</option>
								<option value="80">80%</option>
								<option value="90">90%</option>
								<option value="100">100%</option>
							</select>
							<label for="">Grupo</label>
							<input name="grupo" id="grupo" type="text" required maxlength="45">

							<div class="space-btn" type="submit">
								<button class="btn"><h3><a>Cadastrar</a></h3></button>
							</div>
						</form>
					</div>
				</div>
			</div>

			<div class="box-info-funcionario">
				<h1>Identificação</h1>
				<h1>Componente</h1>
				<h1>Capacidade</h1>
				<h1>Alerta</h1>
				
			</div>
			<div class="box-informacoes-cadastradas">
			
				<div class="titulos">
				<h4 class="title-componente" >VMMac12</h4>
				<h4 class="title-ram">RAM</h4>
				<h4 class="title-capacidade">128 GB</h4>
				<h4 class="title-alerta">60 %</h4>
				<img class="img-edit" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAT9JREFUSEvFlcFNw0AQRZ8POUMqgHsckekgdAIdQAfQAR0QKgkdTKKYO+kgdyMtGsuObMder40t9mStd+f9+TPaiZh4RRPHZxRAovrkwP3Ah4icyqIrgIPqOoJ34NaXWQSPC5GNql7PYAus8vO7FO7LkAogUf0GbgYE3+d37oAKpA5wdjAW8VpXU75PYW33ZvAJGOQ5Fnmzvd6ANltyQGaXg9elyEtvQF152Zb822qRZVTUITiDAFuMUQkenEFTcFPYtt/aponqRZH7Bv9SXS1EdgXEa9GQ4A62scg8CJComhJru7O3PlsOqqcIrspt7s2gsCyFeYjnTRYHAUxRSEEHA2pPx0UrFv/HALQGN0hvQN9Z8f+Aos36Kq+dP8Yi53nSNHA2XTPBI+Do4GEpYs92tkYZmR0D6o+GdFyfPINfYhwMKDF0VFsAAAAASUVORK5CYII="/>
				<div class="icon-delete">
					<span class="material-symbols-sharp">delete</span>
				</div>
			</div>
			</div>
			<!-- <ul class="box-info">
				<li>
					
					<span class="text">
						<div class="div-title">
							<div class="icon">
						<span class="material-icons-sharp">	memory</span>
					       </div>
						<h3>Memória ram</h3>
					   </div>
					<div class="memoria">
					<canvas id="graficoMemoria"></canvas>
					<div>
			        
					</span>
				</li>
				</ul> -->
		</main>
		<!-- MAIN -->
	</section>
	<!-- CONTENT -->


	<!-- <script src="script.js"></script> -->
</body>

</html>
<script>
	const allSideMenu = document.querySelectorAll('#sidebar .side-menu.top li a');

	allSideMenu.forEach(item => {
		const li = item.parentElement;

		item.addEventListener('click', function () {
			allSideMenu.forEach(i => {
				i.parentElement.classList.remove('active');
			})
			li.classList.add('active');
		})
	});




	// TOGGLE SIDEBAR
	const menuBar = document.querySelector('#content nav .bx.bx-menu');
	const sidebar = document.getElementById('sidebar');

	menuBar.addEventListener('click', function () {
		sidebar.classList.toggle('hide');
	})







	const searchButton = document.querySelector('#content nav form .form-input button');
	const searchButtonIcon = document.querySelector('#content nav form .form-input button .bx');
	const searchForm = document.querySelector('#content nav form');

	searchButton.addEventListener('click', function (e) {
		if (window.innerWidth < 576) {
			e.preventDefault();
			searchForm.classList.toggle('show');
			if (searchForm.classList.contains('show')) {
				searchButtonIcon.classList.replace('bx-search', 'bx-x');
			} else {
				searchButtonIcon.classList.replace('bx-x', 'bx-search');
			}
		}
	})





	if (window.innerWidth < 768) {
		sidebar.classList.add('hide');
	} else if (window.innerWidth > 576) {
		searchButtonIcon.classList.replace('bx-x', 'bx-search');
		searchForm.classList.remove('show');
	}


	window.addEventListener('resize', function () {
		if (this.innerWidth > 576) {
			searchButtonIcon.classList.replace('bx-x', 'bx-search');
			searchForm.classList.remove('show');
		}
	})



	const switchMode = document.getElementById('switch-mode');

	switchMode.addEventListener('change', function () {
		if (this.checked) {
			document.body.classList.add('dark');

		} else {
			document.body.classList.remove('dark');
		}
	})

	function plotarGrafico(idGrafico) {

		const ctx = document.getElementById(idGrafico).getContext('2d');
		let myChart = new Chart(ctx, {
			type: 'line',

			data: {
				labels: gerarDatas(),
				datasets: [{
					label: 'Desempenho',
					data: gerarDados(),
					backgroundColor: [
						'rgba(255, 99, 132, 0.12)',
					],
					borderColor: [
						'rgba(255, 99, 132, 1)',
					],
					borderWidth: 1
				}]
			},
			options: {
				scales: {
					y: {
						beginAtZero: true
					}
				}
			}
		});
	}

	function gerarDados() {
		dados = [];
		for (let index = 0; index < 30; index++) {
			dados.push((Math.random() * 100).toFixed(0));
		}
		return dados;
	}
	function gerarDatas() {
		datas = [];
		for (let index = 0; index < 30; index++) {
			datas.push((Math.random() * 23).toFixed(0) + ':' + (Math.random() * 59).toFixed(0) + ':' + (Math.random() * 59).toFixed(0));
		}
		return datas.sort();
	}

	function cadastrarMaquina() {

var formulario = new URLSearchParams(new FormData(document.getElementById("form_cadastroMaquina")));

var hostName = formulario.get("hostName");
var grupo = formulario.get("grupo");



// TODO: VERIFICAR AS VALIDAÇÕES QUE ELES ESTÃO APRENDENDO EM ALGORITMOS 
if (hostName == "" || grupo == "" ) {

	window.alert("Preencha todos os campos para prosseguir!");
	if (hostName == "") {
		console.log('hostName está em branco')
	}
	if (grupo == "") {
		console.log('grupo está em branco')
	}
	
	return false;
}


fetch("/usuarios/cadastrarMaquina", {
	method: "POST",
	body: formulario
}).then(function (resposta) {

	console.log("resposta: ", resposta);

	if (resposta.ok) {
		window.alert("Cadastro realizado com sucesso!");
	} else {
		throw ("Houve um erro ao tentar realizar o cadastro!");
	}
}).catch(function (resposta) {
	console.log(`#ERRO: ${resposta}`);
});

return false;
}
</script>