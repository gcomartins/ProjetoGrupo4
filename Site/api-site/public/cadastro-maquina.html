<!DOCTYPE html>
<html lang="pt">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Boxicons -->
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp" rel="stylesheet" rel='stylesheet'>
	<!-- My CSS -->
	<link rel="stylesheet" href="./css/cadastros-logado.css">
	<link rel="stylesheet" href="https://fonts.sandbox.google.com/css2?family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@48,400,0,0"/>
	<script type="text/javascript" src="https://www.chartjs.org/dist/2.8.0/Chart.min.js"></script>
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
	<link href='https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css' rel='stylesheet'>
	<link rel="stylesheet" href="./css/modal.css">
	
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<title>DataCat</title>
	
</head>

<body onload='listarMaquina("/usuarioController")'>

	<!-- SIDEBAR -->
	<section id="sidebar">
		<a href="#" class="brand">
			<img src="./assets/imagens/logo/logo-black.png"
				alt="">
			<span class="text">DataCat</span>
		</a>
		<ul class="side-menu top">
			<li>
				<a href=".//dashboard/dashboard.html">
					<span class="material-icons-sharp">
						grid_view
					</span>
					<span class="text">Dashboard</span>
				</a>
			</li>
			<li>
				<a href="./cadastro-funcionario.html">
					<span class="material-icons-sharp">
						perm_identity
					</span>
					<span class="text">Cadastrar usuário</span>
				</a>
			</li>
			<li class="active">
				<a href="./cadastro-maquina.html">
					<span class="material-icons-sharp">add_to_queue</span>
					<span>Cadastrar máquina</span>
				</a>
			</li>

		</ul>
		<ul class="side-menu">
			<li>
				<a href="login.html" onclick="limparSessao()" class="logout">
					<span class="material-icons-sharp">logout</span>
					<span class="text">Sair</span>
				</a>
			</li>
		</ul>
	</section>
	<!-- SIDEBAR -->



	<!-- CONTENT -->
	<section id="content">
		<!-- NAVBAR -->
		<nav>
			<i class='bx bx-menu'></i>
			<!-- <span class="material-icons-sharp"> -->


			<a href="#" class="nav-link">Categorias</a>
			<form action="#">
				<div class="form-input">

				</div>
			</form>
			<input type="checkbox" id="switch-mode" hidden>
			<label for="switch-mode" class="switch-mode"></label>
			<a href="#" class="notification">
				<span class="material-icons-sharp">
					notifications
				</span>
				<span class="num">8</span>
			</a>
			<a href="#" class="profile">
				<img src="./assets/fotos/leticia.jfif">
			</a>
		</nav>
		<!-- NAVBAR -->

		<!-- MAIN -->
		<main>
			<div class="head-title">
				<div class="left">
					<h1>Cadastro Máquina / Servidor</h1>
					<ul class="breadcrumb">
						<li>
							<a href="#">Dashboard</a>
						</li>
						<li><i class='bx bx-chevron-right'></i></li>
						<li>
							<a class="active" href="#">Cadastro Máquina / Servidor</a>
						</li>
					</ul>
				</div>
			
			</div>


			<div>
				<div class="box-subscribe-machine">
					<div class="subscribe-left">
						<div class="title-subscribe">
							<h3>Faça o cadastro das suas máquinas e servidores e receba seus dados dinâmicamente onde estiver</h3>
							<i>Cadastre agora</i>
						</div>
						<img src="./assets/imagens/atm_single_png.png" alt="">
					</div>
					<div class = "subscribe-right">
						<form action="" id="form_cadastroMaquina" method="post" onsubmit="return cadastrarMaquina()">
							<label for="">Identificador Máquina</label>
							<input name="identPessoal" id="identPessoal" type="text" required maxlength="15">
							<label for="">Hostname</label>
							<input name="hostName" id="hostName" type="text" required maxlength="15">
							<label for="">Grupo</label>
							<input name="grupo" id="grupo" type="text" required maxlength="15">

							<div class="titulo-dados-componentes">
								<label for="">Componente</label>
								<label for="">Capacidade</label>
								<label for="">Limite Alerta</label>
							</div>

							<div class="agrupamento-cadastro-componentes">
								<div class="dados-componentes">
									<select name="comp1" id="comp1"  required maxlength="5">
										<option value="Ram">RAM</option>
									</select>
									<input name="capacidadeRam" id="capacidadeRam" type="number" required maxlength="45">
									<select name="limiteAlertaRam" id="limiteAlertaRam" type="" required maxlength="15">
										<option value="50">50%</option>
										<option value="60">60%</option>
										<option value="70">70%</option>
										<option value="80">80%</option>
										<option value="90">90%</option>
										<option value="100">100%</option>
									</select>
								</div>

								<div class="dados-componentes">
									<select name="comp2" id="comp2"  required maxlength="3">
										<option value="Cpu">CPU</option>
									</select>
									<input name="capacidadeCpu" id="capacidadeCpu" type="number" required maxlength="45">
									<select name="limiteAlertaCpu" id="limiteAlertaCpu" type="" required maxlength="15">
										<option value="50">50%</option>
										<option value="60">60%</option>
										<option value="70">70%</option>
										<option value="80">80%</option>
										<option value="90">90%</option>
										<option value="100">100%</option>
									</select>
								</div>

								<div class="dados-componentes">
									<select name="comp3" id="comp3"  required maxlength="3">
										<option value="Disco">DISCO</option>
									</select>
									<input name="capacidadeDisco" id="capacidadeDisco" type="number" required maxlength="45">
									<select name="limiteAlertaDisco" id="limiteAlertaDisco" type="" required maxlength="15">
										<option value="50">50%</option>
										<option value="60">60%</option>
										<option value="70">70%</option>
										<option value="80">80%</option>
										<option value="90">90%</option>
										<option value="100">100%</option>
									</select>
								</div>
							</div>
							<!-- <label for="">Capacidade</label>
							<input name="capacidade" id="capacidade" type="number" required maxlength="45">
							<label for="">Limite Alerta</label>
							<select name="limiteAlerta" id="limiteAlerta" type="" required maxlength="15">
								<option value="50">50%</option>
								<option value="60">60%</option>
								<option value="70">70%</option>
								<option value="80">80%</option>
								<option value="90">90%</option>
								<option value="100">100%</option>
							</select> -->
							<input name="idEmpresa" id="idEmpresa" style="visibility: hidden;" >
							<div class="space-btn">
								<button class="btn"><h3><a>Cadastrar</a></h3></button>
							</div>
						</form>
					</div>
				</div>
			</div>
			
			<button class="btn-modal" id="myBtn">Editar</button>
			<button class="btn-modal" id="myBtn2">Deletar</button>

			<div class="box-info-funcionario">
				<h1 class="identificacao">Identificação</h1>
				<h1>Componente</h1>
				<h1>Capacidade</h1>
				<h1>Alerta</h1>
				
			</div>
			<div id="listaMaquina"></div>
			<!-- The Modal -->
<div id="myModal" class="modal">

	<!-- Modal content -->
	<div class="modal-content">
	  <span class="close">&times;</span>
	  <p>
		  <div>
			  <div class="box-subscribe">
				  <div class="subscribe-left">
					  <div class="title-subscribe">
						  <h3>Altere os dados do seu time e deixe todos infomados</h3>
					  </div>
					  <img src="./assets/imagens/filing-system-amico.png" alt="">
				  </div>
				  
				  <div id="cadastro" class = "subscribe-right">
					  <form action="" id="form_upDateUsuario" method="post" onsubmit="return upDateMaquina()">
						  <label  for="">Coloque o Id da maquina que deseja editar</label>
						  <input name="idMaquinaComponentes" type="text" required maxlength="15">
						  <label for="">Componente</label>
							<select name="nome" id="nome"  required maxlength="3">
								<option value="Ram">RAM</option>
								<option value="Cpu">CPU</option>
								<option value="Disco">DISCO</option>
							</select>
						  <label for="">Capacidade</label>
						  <input name="capacidade" id="capacidade" type="text" required maxlength="15">
						  <label for="">Limite Alerta</label>
						  <select name="limiteAlerta" id="limiteAlerta" type="text" required maxlength="15">
							  <option value="50">50%</option>
							  <option value="60">60%</option>
							  <option value="70">70%</option>
							  <option value="80">80%</option>
							  <option value="90">90%</option>
							  <option value="100">100%</option>
						  </select>
						  <div class="space-btn">
						  <button class="btn"><h3><a>Editar</a></h3></button>
						  </div>
					  </form>
					  
				  
				  </div>
			  </div>
		  </div>	
	  </p>
	</div>
  
  </div>
  
  <!-- The Modal -->
  <div id="myModal2" class="modal">
  
	<!-- Modal content -->
	<div class="modal-content">
	  <span class="close">&times;</span>
	  <p>
		  <div>
			  <div class="box-subscribe">
				  <div class="subscribe-left">
					  <div class="title-subscribe">
						  <h3>Delete um usuario do seu time </h3>
					  </div>
					  <img src="./assets/imagens/filing-system-amico.png" alt="">
				  </div>
				  
				  <div id="cadastro" class = "subscribe-right">
					  <form action="" id="form_deletarMaquina" method="post" onsubmit="return deletarMaquina()">
						  <label  for="">Identificador</label>
						  <input name="idMaquinaComponentes" type="text" required maxlength="15">
						  <label for="">Componente</label>
						  <input name="nome" type="text" required maxlength="45">
						  <div class="space-btn">
						  <button class="btn"><h3><a>Deletar usuario</a></h3></button>
						  </div>
					  </form>
					  
				  
				  </div>
			  </div>
		  </div>	
	  </p>
	</div>
  
  </div>
			<!-- <ul class="box-info">
				<li>
					
					<span class="text">
						<div class="div-title">
							<div class="icon">
						<span class="material-icons-sharp">	memory</span>
					       </div>
						<h3>Memória ram</h3>
					   </div>
					<div class="memoria">
					<canvas id="graficoMemoria"></canvas>
					<div>
			        
					</span>
				</li>
				</ul> -->
		</main>
		<!-- MAIN -->
	</section>
	<!-- CONTENT -->


	<!-- <script src="script.js"></script> -->

</body>

</html>
<script>

function cadastrarMaquina() {
    var myInput = document.getElementById("idEmpresa");
    myInput.value = sessionStorage.ID_EMPRESA;
        var formulario = new URLSearchParams(new FormData(document.getElementById("form_cadastroMaquina")));
        
        var identPessoal = formulario.get("identPessoal");
        var hostName = formulario.get("hostName");
        var grupo = formulario.get("grupo");
        var idEmpresa = sessionStorage.ID_EMPRESA;
        
        
        // TODO: VERIFICAR AS VALIDAÇÕES QUE ELES ESTÃO APRENDENDO EM ALGORITMOS 
        if (hostName == "" || grupo == "" || nome == "" || identPessoal == "" || idEmpresa == "" ) {
        
        window.alert("Preencha todos os campos para prosseguir!");
            if (hostName == "" ) {
                console.log("hostName está em branco!");
            }
            if (grupo == "") {
                console.log('grupo está em branco')
            }
            if (nome == "") {
                console.log("nome está em branco!");
            }
                return false;
            }
        
        fetch("/usuarios/cadastrarMaquina", {
        method: "POST",
        body: formulario,
        }).then(function (resposta) {
        
        console.log("resposta: ", resposta);
        
        if (resposta.ok) {
            window.alert("Cadastro realizado com sucesso!");
            limparFormulario2() 
        } else {
            throw ("Houve um erro ao tentar realizar o cadastro!");
        }
        }).catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
        });

		fetch("/usuarios/cadastrarComponente", {
        method: "POST",
        body: formulario,
        }).then(function (resposta) {
        
        console.log("resposta: ", resposta);
        
        if (resposta.ok) {
            window.alert("Cadastro realizado com sucesso!");
            limparFormulario2() 
        } else {
            throw ("Houve um erro ao tentar realizar o cadastro!");
        }
        }).catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
        });

        return false;
    }

// Get the modal
var modal = document.getElementById("myModal");
var modal2 = document.getElementById("myModal2");

// Get the button that opens the modal
var btn = document.getElementById("myBtn");
var btn2 = document.getElementById("myBtn2");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];



// When the user clicks on the button, open the modal
btn.onclick = function() {
  modal.style.display = "block";
}
btn2.onclick = function() {
  modal2.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modal.style.display = "none";
  modal2.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal || event.target == modal2 ) {
    modal.style.display = "none";
	modal2.style.display = "none";
  }
}



	const allSideMenu = document.querySelectorAll('#sidebar .side-menu.top li a');

	allSideMenu.forEach(item => {
		const li = item.parentElement;

		item.addEventListener('click', function () {
			allSideMenu.forEach(i => {
				i.parentElement.classList.remove('active');
			})
			li.classList.add('active');
		})
	});




	// TOGGLE SIDEBAR
	const menuBar = document.querySelector('#content nav .bx.bx-menu');
	const sidebar = document.getElementById('sidebar');

	menuBar.addEventListener('click', function () {
		sidebar.classList.toggle('hide');
	})







	const searchButton = document.querySelector('#content nav form .form-input button');
	const searchButtonIcon = document.querySelector('#content nav form .form-input button .bx');
	const searchForm = document.querySelector('#content nav form');

	searchButton.addEventListener('click', function (e) {
		if (window.innerWidth < 576) {
			e.preventDefault();
			searchForm.classList.toggle('show');
			if (searchForm.classList.contains('show')) {
				searchButtonIcon.classList.replace('bx-search', 'bx-x');
			} else {
				searchButtonIcon.classList.replace('bx-x', 'bx-search');
			}
		}
	})





	if (window.innerWidth < 768) {
		sidebar.classList.add('hide');
	} else if (window.innerWidth > 576) {
		searchButtonIcon.classList.replace('bx-x', 'bx-search');
		searchForm.classList.remove('show');
	}


	window.addEventListener('resize', function () {
		if (this.innerWidth > 576) {
			searchButtonIcon.classList.replace('bx-x', 'bx-search');
			searchForm.classList.remove('show');
		}
	})

</script>

<script src="./js/funcoes.js"></script>

<!-- <script src="./js/Deletes.js"></script> -->

<!-- <script src="./js/upDates.js"></script> -->

<script src="./js/Cadastrar.js"></script>

<!-- <script src="./js/Listar.js"></script> -->

